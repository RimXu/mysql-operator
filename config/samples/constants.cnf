  my.cnf: |
    [client]
    socket = /data/3306/tmp/mysql.sock
    default-character-set = utf8mb4
    port = 3306
    [mysql]
    default-character-set = utf8mb4
    port = 3306
    [mysqld]
    net_read_timeout = 30
    open_files_limit = 65536
    basedir = /data/3306/mysql
    innodb_log_group_home_dir = /data/3306/data
    slave_load_tmpdir = /data/3306/tmp
    relay_log = /data/3306/relaylog
    innodb_purge_threads = 1
    innodb_old_blocks_time = 1000
    innodb_max_dirty_pages_pct = 60
    enforce_gtid_consistency = on
    relay_log_index = /data/3306/mysqld-relay-bin.index
    sort_buffer_size = 256K
    relay_log_info_file = /data/3306/relay-log.info
    innodb_flush_sync = 1
    expire_logs_days = 3
    binlog_format = ROW
    master-info-repository = table
    lower_case_table_names = 1
    read_buffer_size = 128K
    table_definition_cache = 3000
    slave_net_timeout = 4
    group_concat_max_len = 102400
    net_write_timeout = 60
    thread_cache_size = 256
    tmpdir = /data/3306/tmp
    innodb_open_files = 60000
    innodb_flush_log_at_trx_commit = 1
    server_id = 10
    skip-name-resolve = true
    pid-file = /data/3306/tmp/mysql.pid
    log_bin = /data/3306/binlog
    character-set-server = utf8mb4
    log_slow_admin_statements = 1
    concurrent_insert = 2
    innodb_read_io_threads = 4
    innodb_write_io_threads = 4
    join_buffer_size = 128K
    sync_binlog = 1
    binlog_cache_size = 32K
    gtid_mode = on
    skip-ssl = true
    connect_timeout = 8
    max_allowed_packet = 128M
    innodb_flush_method = O_DIRECT
    sql_mode = ONLY_FULL_GROUP_BY,NO_AUTO_VALUE_ON_ZERO,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION,PIPES_AS_CONCAT,ANSI_QUOTES
    thread_stack = 512K
    innodb_buffer_pool_size = 240M
    port = 3306
    long_query_time = 3
    transaction-isolation = READ-COMMITTED
    slave-parallel-type = LOGICAL_CLOCK
    datadir = /data/3306/data
    socket = /data/3306/tmp/mysql.sock
    skip-external-locking = true
    max_connections = 4500
    read_rnd_buffer_size = 128K
    innodb_change_buffering = all
    log-slave-updates = 0
    slave_type_conversions = ALL_NON_LOSSY
    back_log = 1024
    max_connect_errors = 65536
    innodb_doublewrite = 1
    innodb_data_file_path = ibdata1:16M:autoextend
    innodb_file_per_table = 1
    performance_schema = on
    explicit_defaults_for_timestamp = true
    table_open_cache = 10000
    delayed_insert_timeout = 300
    sync_master_info = 1000
    slow_query_log = 1
    max_user_connections = 4000
    innodb_data_home_dir = /data/3306/data
    myisam_sort_buffer_size = 64M
    innodb_io_capacity = 1000
    innodb_thread_concurrency = 8
    max_binlog_size = 500M
    sync_relay_log_info = 1000
    slave-parallel-workers = 8

